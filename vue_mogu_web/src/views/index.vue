<template>
<div>
    <div class="pagebg sh"></div>
    <div>
  
  <div class="container" >
  <div class="share">
          <h1 class="t_nav">
        <span>好咖啡要和朋友一起品尝，好“资料”也要和同样喜欢它的人一起分享。</span>
        <a href="/" class="n1">电影</a>
      </h1>
    <ul>
    <div style="width:800px;float:left">
    <li>
      <div class="shareli">
        <router-link to="/videoShow">
         <a href="javascript:void(0);" >
                <i>
                  <img src="static/images/b01.jpg" style="width:100%">
                </i>
                <h2>
                  <b>简介</b>
                </h2>
                <span>视频名称</span>
              </a>
              </router-link>
       </div>
    </li>
    
    <li>
      <div class="shareli">
         <a href="javascript:void(0);">
                <i>
                  <img src="static/images/b01.jpg" style="width:100%">
                </i>
                <h2>
                  <b>简介</b>
                </h2>
                <span>视频名称</span>
              </a>
       </div>
    </li>
        
    <li>
      <div class="shareli">
         <a href="javascript:void(0);">
                <i>
                  <img src="static/images/b01.jpg" style="width:100%">
                </i>
                <h2>
                  <b>简介</b>
                </h2>
                <span>视频名称</span>
              </a>
       </div>
    </li>
        
    <li>
      <div class="shareli">
         <a href="javascript:void(0);">
                <i>
                  <img src="static/images/b01.jpg" style="width:100%">
                </i>
                <h2>
                  <b>简介</b>
                </h2>
                <span>视频名称</span>
              </a>
       </div>
    </li>
        
    <li>
      <div class="shareli">
         <a href="javascript:void(0);">
                <i>
                  <img src="static/images/b01.jpg" style="width:100%">
                </i>
                <h2>
                  <b>简介</b>
                </h2>
                <span>视频名称</span>
              </a>
       </div>
    </li>
    <li>
      <div class="shareli">
         <a href="javascript:void(0);">
                <i>
                  <img src="static/images/b01.jpg" style="width:100%">
                </i>
                <h2>
                  <b>简介</b>
                </h2>
                <span>视频名称</span>
              </a>
       </div>
    </li>
    </div>
     <div class="sidebar2" style="width:300px;float:right">
      <div class="tuijian"> 
      <h2 class="hometitle"></h2>
      <ul class="tjpic" >
        <i><img style="cursor:pointer" src="static/images/b01.jpg"></i>
        <p><a href="javascript:void(0);">标题A</a></p>
      </ul>
      <ul class="sidenews">
        <li >
          <i><img style="cursor:pointer" src="static/images/b01.jpg"></i>
          <p><a href="javascript:void(0);">标题B</a></p>
          <span>2021/5/9</span>
        </li>

      </ul>
      <ul class="sidenews">
        <li >
          <i><img style="cursor:pointer" src="static/images/b01.jpg"></i>
          <p><a href="javascript:void(0);">标题C</a></p>
          <span>2021/5/9</span>
        </li>
        
      </ul>
      <ul class="sidenews">
        <li >
          <i><img style="cursor:pointer" src="static/images/b01.jpg"></i>
          <p><a href="javascript:void(0);">标题D</a></p>
          <span>2021/5/9</span>
        </li>
        
      </ul>
   
      <ul class="sidenews">
        <li >
          <i><img style="cursor:pointer" src="static/images/b01.jpg"></i>
          <p><a href="javascript:void(0);">标题F</a></p>
          <span>2021/5/9</span>
        </li>
        
      </ul>
    </div>
    </div>
    
    </ul>
    
 
    </div>
    <div class="share">
          <h1 class="t_nav">
        <span>好咖啡要和朋友一起品尝，好“资料”也要和同样喜欢它的人一起分享。</span>
        <a href="/" class="n1">科技</a>
      </h1>
    <ul>
    <div style="width:800px;float:left">
    <li>
      <div class="shareli">
         <a href="javascript:void(0);">
                <i>
                  <img src="static/images/b01.jpg" style="width:100%">
                </i>
                <h2>
                  <b>简介</b>
                </h2>
                <span>视频名称</span>
              </a>
       </div>
    </li>
    
    <li>
      <div class="shareli">
         <a href="javascript:void(0);">
                <i>
                  <img src="static/images/b01.jpg" style="width:100%">
                </i>
                <h2>
                  <b>简介</b>
                </h2>
                <span>视频名称</span>
              </a>
       </div>
    </li>
        
    <li>
      <div class="shareli">
         <a href="javascript:void(0);">
                <i>
                  <img src="static/images/b01.jpg" style="width:100%">
                </i>
                <h2>
                  <b>简介</b>
                </h2>
                <span>视频名称</span>
              </a>
       </div>
    </li>
        
    <li>
      <div class="shareli">
         <a href="javascript:void(0);">
                <i>
                  <img src="static/images/b01.jpg" style="width:100%">
                </i>
                <h2>
                  <b>简介</b>
                </h2>
                <span>视频名称</span>
              </a>
       </div>
    </li>
        
    <li>
      <div class="shareli">
         <a href="javascript:void(0);">
                <i>
                  <img src="static/images/b01.jpg" style="width:100%">
                </i>
                <h2>
                  <b>简介</b>
                </h2>
                <span>视频名称</span>
              </a>
       </div>
    </li>
    <li>
      <div class="shareli">
         <a href="javascript:void(0);">
                <i>
                  <img src="static/images/b01.jpg" style="width:100%">
                </i>
                <h2>
                  <b>简介</b>
                </h2>
                <span>视频名称</span>
              </a>
       </div>
    </li>
    </div>
     <div class="sidebar2" style="width:300px;float:right">
      <div class="tuijian"> 
      <h2 class="hometitle"></h2>
      <ul class="tjpic" >
        <i><img style="cursor:pointer" src="static/images/b01.jpg"></i>
        <p><a href="javascript:void(0);">标题A</a></p>
      </ul>
      <ul class="sidenews">
        <li >
          <i><img style="cursor:pointer" src="static/images/b01.jpg"></i>
          <p><a href="javascript:void(0);">标题B</a></p>
          <span>2021/5/9</span>
        </li>

      </ul>
      <ul class="sidenews">
        <li >
          <i><img style="cursor:pointer" src="static/images/b01.jpg"></i>
          <p><a href="javascript:void(0);">标题C</a></p>
          <span>2021/5/9</span>
        </li>
        
      </ul>
      <ul class="sidenews">
        <li >
          <i><img style="cursor:pointer" src="static/images/b01.jpg"></i>
          <p><a href="javascript:void(0);">标题D</a></p>
          <span>2021/5/9</span>
        </li>
        
      </ul>
   
      <ul class="sidenews">
        <li >
          <i><img style="cursor:pointer" src="static/images/b01.jpg"></i>
          <p><a href="javascript:void(0);">标题F</a></p>
          <span>2021/5/9</span>
        </li>
        
      </ul>
    </div>
    </div>
    
    </ul>
    
 
    </div>
    <div class="share">
          <h1 class="t_nav">
        <span>好咖啡要和朋友一起品尝，好“资料”也要和同样喜欢它的人一起分享。</span>
        <a href="/" class="n1">动漫</a>
      </h1>
    <ul>
    <div style="width:800px;float:left">
    <li>
      <div class="shareli">
         <a href="javascript:void(0);">
                <i>
                  <img src="static/images/b01.jpg" style="width:100%">
                </i>
                <h2>
                  <b>简介</b>
                </h2>
                <span>视频名称</span>
              </a>
       </div>
    </li>
    
    <li>
      <div class="shareli">
         <a href="javascript:void(0);">
                <i>
                  <img src="static/images/b01.jpg" style="width:100%">
                </i>
                <h2>
                  <b>简介</b>
                </h2>
                <span>视频名称</span>
              </a>
       </div>
    </li>
        
    <li>
      <div class="shareli">
         <a href="javascript:void(0);">
                <i>
                  <img src="static/images/b01.jpg" style="width:100%">
                </i>
                <h2>
                  <b>简介</b>
                </h2>
                <span>视频名称</span>
              </a>
       </div>
    </li>
        
    <li>
      <div class="shareli">
         <a href="javascript:void(0);">
                <i>
                  <img src="static/images/b01.jpg" style="width:100%">
                </i>
                <h2>
                  <b>简介</b>
                </h2>
                <span>视频名称</span>
              </a>
       </div>
    </li>
        
    <li>
      <div class="shareli">
         <a href="javascript:void(0);">
                <i>
                  <img src="static/images/b01.jpg" style="width:100%">
                </i>
                <h2>
                  <b>简介</b>
                </h2>
                <span>视频名称</span>
              </a>
       </div>
    </li>
    <li>
      <div class="shareli">
         <a href="javascript:void(0);">
                <i>
                  <img src="static/images/b01.jpg" style="width:100%">
                </i>
                <h2>
                  <b>简介</b>
                </h2>
                <span>视频名称</span>
              </a>
       </div>
    </li>
    </div>
     <div class="sidebar2" style="width:300px;float:right">
      <div class="tuijian"> 
      <h2 class="hometitle"></h2>
      <ul class="tjpic" >
        <i><img style="cursor:pointer" src="static/images/b01.jpg"></i>
        <p><a href="javascript:void(0);">标题A</a></p>
      </ul>
      <ul class="sidenews">
        <li >
          <i><img style="cursor:pointer" src="static/images/b01.jpg"></i>
          <p><a href="javascript:void(0);">标题B</a></p>
          <span>2021/5/9</span>
        </li>

      </ul>
      <ul class="sidenews">
        <li >
          <i><img style="cursor:pointer" src="static/images/b01.jpg"></i>
          <p><a href="javascript:void(0);">标题C</a></p>
          <span>2021/5/9</span>
        </li>
        
      </ul>
      <ul class="sidenews">
        <li >
          <i><img style="cursor:pointer" src="static/images/b01.jpg"></i>
          <p><a href="javascript:void(0);">标题D</a></p>
          <span>2021/5/9</span>
        </li>
        
      </ul>
   
      <ul class="sidenews">
        <li >
          <i><img style="cursor:pointer" src="static/images/b01.jpg"></i>
          <p><a href="javascript:void(0);">标题F</a></p>
          <span>2021/5/9</span>
        </li>
        
      </ul>
    </div>
    </div>
    
    </ul>
    
 
    </div>
..  <div class="share">
          <h1 class="t_nav">
        <span>好咖啡要和朋友一起品尝，好“资料”也要和同样喜欢它的人一起分享。</span>
        <a href="/" class="n1">电视剧</a>
      </h1>
    <ul>
    <div style="width:800px;float:left">
    <li>
      <div class="shareli">
         <a href="javascript:void(0);">
                <i>
                  <img src="static/images/b01.jpg" style="width:100%">
                </i>
                <h2>
                  <b>简介</b>
                </h2>
                <span>视频名称</span>
              </a>
       </div>
    </li>
    
    <li>
      <div class="shareli">
         <a href="javascript:void(0);">
                <i>
                  <img src="static/images/b01.jpg" style="width:100%">
                </i>
                <h2>
                  <b>简介</b>
                </h2>
                <span>视频名称</span>
              </a>
       </div>
    </li>
        
    <li>
      <div class="shareli">
         <a href="javascript:void(0);">
                <i>
                  <img src="static/images/b01.jpg" style="width:100%">
                </i>
                <h2>
                  <b>简介</b>
                </h2>
                <span>视频名称</span>
              </a>
       </div>
    </li>
        
    <li>
      <div class="shareli">
         <a href="javascript:void(0);">
                <i>
                  <img src="static/images/b01.jpg" style="width:100%">
                </i>
                <h2>
                  <b>简介</b>
                </h2>
                <span>视频名称</span>
              </a>
       </div>
    </li>
        
    <li>
      <div class="shareli">
         <a href="javascript:void(0);">
                <i>
                  <img src="static/images/b01.jpg" style="width:100%">
                </i>
                <h2>
                  <b>简介</b>
                </h2>
                <span>视频名称</span>
              </a>
       </div>
    </li>
    <li>
      <div class="shareli">
         <a href="javascript:void(0);">
                <i>
                  <img src="static/images/b01.jpg" style="width:100%">
                </i>
                <h2>
                  <b>简介</b>
                </h2>
                <span>视频名称</span>
              </a>
       </div>
    </li>
    </div>
     <div class="sidebar2" style="width:300px;float:right">
      <div class="tuijian"> 
      <h2 class="hometitle"></h2>
      <ul class="tjpic" >
        <i><img style="cursor:pointer" src="static/images/b01.jpg"></i>
        <p><a href="javascript:void(0);">标题A</a></p>
      </ul>
      <ul class="sidenews">
        <li >
          <i><img style="cursor:pointer" src="static/images/b01.jpg"></i>
          <p><a href="javascript:void(0);">标题B</a></p>
          <span>2021/5/9</span>
        </li>

      </ul>
      <ul class="sidenews">
        <li >
          <i><img style="cursor:pointer" src="static/images/b01.jpg"></i>
          <p><a href="javascript:void(0);">标题C</a></p>
          <span>2021/5/9</span>
        </li>
        
      </ul>
      <ul class="sidenews">
        <li >
          <i><img style="cursor:pointer" src="static/images/b01.jpg"></i>
          <p><a href="javascript:void(0);">标题D</a></p>
          <span>2021/5/9</span>
        </li>
        
      </ul>
   
      <ul class="sidenews">
        <li >
          <i><img style="cursor:pointer" src="static/images/b01.jpg"></i>
          <p><a href="javascript:void(0);">标题F</a></p>
          <span>2021/5/9</span>
        </li>
        
      </ul>
    </div>
    </div>
    
    </ul>
    
 
    </div>
    


 
    
    
    
    
    
    </div>
    
  
    </div> 
</div>
</template>

<script>
  import FirstRecommend from "../components/FirstRecommend";
  import ThirdRecommend from "../components/ThirdRecommend";
  import FourthRecommend from "../components/FourthRecommend";
  import TagCloud from "../components/TagCloud";
  import HotBlog from "../components/HotBlog";
  import FollowUs from "../components/FollowUs";
  import Link from "../components/Link";
  import {getBlogByLevel, getNewBlog, getNewVideo, recorderVisitPage} from "../api/index";
  import { Loading } from 'element-ui';
  import {getBlogByUid} from "../api/blogContent";
  export default {
    name: "index",
    components: {
      //注册组件
      FirstRecommend,
      FourthRecommend,
      ThirdRecommend,
      TagCloud,
      HotBlog,
      FollowUs,
      Link,
    },
    data() {
      return {
        loadingInstance: null, // loading对象
        VUE_MOGU_WEB: process.env.VUE_MOGU_WEB,
        firstData: [], //；一级推荐数据
        secondData: [], //；二级级推荐数据
        thirdData: [], //三级推荐
        fourthData: [], //四级推荐
        newBlogData: [], //最新文章
        hotBlogData: [], //最热文章
        newVideoData:[],//新视频
        hotTagData: [], //最新标签
        keyword: "",
        currentPage: 1,
        pageSize: 15,
        total: 0, //总数量
        isEnd: false, //是否到底底部了
        loading: false //是否正在加载
      };
    },
    mounted() {
      // 注册scroll事件并监听
      this.loading = false;
    },
    created() {
      var secondParams = new URLSearchParams();
      secondParams.append("level", 2);
      // 是否排序
      secondParams.append("useSort", 1);
      getBlogByLevel(secondParams).then(response => {
        if(response.code == this.$ECode.SUCCESS) {
          this.secondData = response.data.records;
        }
      });
      // 获取最新博客
      this.newBlogList();
      this.newVideoList();
      //获取最新视频
      this.new
      var params = new URLSearchParams();
      params.append("pageName", "INDEX");
        recorderVisitPage(params).then(response => {
      });
    },
    methods: {
      //跳转到文章详情【或推广链接】
      goToInfo(blog) {
        if(blog.type == "0") {
          let routeData = this.$router.resolve({
            path: "/info",
            query: {blogOid: blog.oid}
          });
          window.open(routeData.href, '_blank');
        } else if(blog.type == "1") {
          var params = new URLSearchParams();
          params.append("uid", blog.uid);
          getBlogByUid(params).then(response => {
            // 记录一下用户点击日志
          });
          window.open(blog.outsideLink, '_blank');
        }
      },
      //跳转到搜索详情页
      goToList(uid) {
        let routeData = this.$router.push({
          path: "/list",
          query: {sortUid: uid}
        });

      },

      //跳转到搜索详情页
      goToAuthor(author) {
        let routeData = this.$router.push({
          path: "/list",
          query: {author: author}
        });
      },
 //最新视频列表
      newVideoList() {
        var that = this;
        that.loadingInstance = Loading.service({
          lock: true,
          text: '正在努力加载中……',
          background: 'rgba(0, 0, 0, 0.7)'
        })

        var params = new URLSearchParams();
        params.append("currentPage", this.currentPage);
        params.append("pageSize", this.pageSize);
        getNewVideo(params).then(response => {
          if (response.code == this.$ECode.SUCCESS) {
            that.newVideoData = response.data.records;
            that.total = response.data.total;
            that.pageSize = response.data.size;
            that.currentPage = response.data.current;
          }
          that.loadingInstance.close();
        },function(err){
          that.loadingInstance.close();
        });
      },
      //最新博客列表
      newBlogList() {
        var that = this;
        that.loadingInstance = Loading.service({
          lock: true,
          text: '正在努力加载中……',
          background: 'rgba(0, 0, 0, 0.7)'
        })

        var params = new URLSearchParams();
        params.append("currentPage", this.currentPage);
        params.append("pageSize", this.pageSize);
        getNewBlog(params).then(response => {
          if (response.code == this.$ECode.SUCCESS) {
            that.newBlogData = response.data.records;
            that.total = response.data.total;
            that.pageSize = response.data.size;
            that.currentPage = response.data.current;
          }
          that.loadingInstance.close();
        },function(err){
          that.loadingInstance.close();
        });
      },

      loadContent: function () {
        var that = this;
        that.loading = false;
        that.currentPage = that.currentPage + 1;
        var params = new URLSearchParams();
        params.append("currentPage", that.currentPage);
        params.append("pageSize", that.pageSize);
        getNewBlog(params).then(response => {
          if (response.code == this.$ECode.SUCCESS && response.data.records.length > 0) {
            that.isEnd = false;
            var newData = that.newBlogData.concat(response.data.records);
            that.newBlogData = newData;
            that.total = response.data.total;
            that.pageSize = response.data.size;
            that.currentPage = response.data.current;

            //全部加载完毕
            if (newData.length < that.pageSize) {
              that.isEnd = true;
            }
          } else {
            that.isEnd = true;
          }
          that.loading = false;
        });
      }
    }
  };
</script>

<style>
.resImg {
  width: 100%;
  height: 160px;
  vertical-align: middle;
}
</style>
